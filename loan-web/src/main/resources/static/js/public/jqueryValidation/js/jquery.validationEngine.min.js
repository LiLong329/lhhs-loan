(function($){"use strict";if(!Array.indexOf){Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++){if(this[t]==e){return t}}return-1}}var methods={init:function(e){var t=this;if(!t.data("jqv")||t.data("jqv")==null){e=methods._saveOptions(t,e);$(document).on("click",".formError",function(){$(this).fadeOut(150,function(){$(this).parent(".formErrorOuter").remove();$(this).remove()})})}return this},attach:function(e){var t=this;var a;if(e)a=methods._saveOptions(t,e);else a=t.data("jqv");a.validateAttribute=t.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class";if(a.binded){t.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",methods._onFieldEvent);t.on("click","["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]",methods._onFieldEvent);t.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate][class*=datepicker]",{delay:300},methods._onFieldEvent)}if(a.autoPositionUpdate){$(window).bind("resize",{noAnimation:true,formElem:t},methods.updatePromptsPosition)}t.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",methods._submitButtonClick);t.removeData("jqv_submitButton");t.on("submit",methods._onSubmitEvent);return this},detach:function(){var e=this;var t=e.data("jqv");e.find("["+t.validateAttribute+"*=validate]").not("[type=checkbox]").off(t.validationEventTrigger,methods._onFieldEvent);e.find("["+t.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",methods._onFieldEvent);e.off("submit",methods._onSubmitEvent);e.removeData("jqv");e.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",methods._submitButtonClick);e.removeData("jqv_submitButton");if(t.autoPositionUpdate)$(window).off("resize",methods.updatePromptsPosition);return this},validate:function(){var e=$(this);var t=null;if(e.is("form")||e.hasClass("validationEngineContainer")){if(e.hasClass("validating")){return false}else{e.addClass("validating");var a=e.data("jqv");var t=methods._validateFields(this);setTimeout(function(){e.removeClass("validating")},100);if(t&&a.onSuccess){a.onSuccess()}else if(!t&&a.onFailure){a.onFailure()}}}else if(e.is("form")||e.hasClass("validationEngineContainer")){e.removeClass("validating")}else{var r=e.closest("form, .validationEngineContainer"),a=r.data("jqv")?r.data("jqv"):$.validationEngine.defaults,t=methods._validateField(e,a);if(t&&a.onFieldSuccess)a.onFieldSuccess();else if(a.onFieldFailure&&a.InvalidFields.length>0){a.onFieldFailure()}}if(a.onValidationComplete){return!!a.onValidationComplete(r,t)}return t},updatePromptsPosition:function(e){if(e&&this==window){var t=e.data.formElem;var a=e.data.noAnimation}else var t=$(this.closest("form, .validationEngineContainer"));var r=t.data("jqv");t.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=$(this);if(r.prettySelect&&e.is(":hidden"))e=t.find("#"+r.usePrefix+e.attr("id")+r.useSuffix);var i=methods._getPrompt(e);var s=$(i).find(".formErrorContent").html();if(i)methods._updatePrompt(e,$(i),s,undefined,false,r,a)});return this},showPrompt:function(e,t,a,r){var i=this.closest("form, .validationEngineContainer");var s=i.data("jqv");if(!s)s=methods._saveOptions(this,s);if(a)s.promptPosition=a;s.showArrow=r==true;methods._showPrompt(this,e,t,false,s);return this},hide:function(){var e=$(this).closest("form, .validationEngineContainer");var t=e.data("jqv");var a=t&&t.fadeDuration?t.fadeDuration:.3;var r;if($(this).is("form")||$(this).hasClass("validationEngineContainer")){r="parentForm"+methods._getClassName($(this).attr("id"))}else{r=methods._getClassName($(this).attr("id"))+"formError"}$("."+r).fadeTo(a,.3,function(){$(this).parent(".formErrorOuter").remove();$(this).remove()});return this},hideAll:function(){var e=this;var t=e.data("jqv");var a=t?t.fadeDuration:300;$(".formError").fadeTo(a,300,function(){$(this).parent(".formErrorOuter").remove();$(this).remove()});return this},_onFieldEvent:function(e){var t=$(this);var a=t.closest("form, .validationEngineContainer");var r=a.data("jqv");r.eventTrigger="field";window.setTimeout(function(){methods._validateField(t,r);if(r.InvalidFields.length==0&&r.onFieldSuccess){r.onFieldSuccess()}else if(r.InvalidFields.length>0&&r.onFieldFailure){r.onFieldFailure()}},e.data?e.data.delay:0)},_onSubmitEvent:function(){var e=$(this);var t=e.data("jqv");if(e.data("jqv_submitButton")){var a=$("#"+e.data("jqv_submitButton"));if(a){if(a.length>0){if(a.hasClass("validate-skip")||a.attr("data-validation-engine-skip")=="true")return true}}}t.eventTrigger="submit";var r=methods._validateFields(e);if(r&&t.ajaxFormValidation){methods._validateFormWithAjax(e,t);return false}if(t.onValidationComplete){return!!t.onValidationComplete(e,r)}return r},_checkAjaxStatus:function(e){var t=true;$.each(e.ajaxValidCache,function(e,a){if(!a){t=false;return false}});return t},_checkAjaxFieldStatus:function(e,t){return t.ajaxValidCache[e]==true},_validateFields:function(e){var t=e.data("jqv");var a=false;e.trigger("jqv.form.validating");var r=null;e.find("["+t.validateAttribute+"*=validate]").not(":disabled").each(function(){var i=$(this);var s=[];if($.inArray(i.attr("name"),s)<0){a|=methods._validateField(i,t);if(a&&r==null)if(i.is(":hidden")&&t.prettySelect)r=i=e.find("#"+t.usePrefix+methods._jqSelector(i.attr("id"))+t.useSuffix);else{if(i.data("jqv-prompt-at")instanceof jQuery){i=i.data("jqv-prompt-at")}else if(i.data("jqv-prompt-at")){i=$(i.data("jqv-prompt-at"))}r=i}if(t.doNotShowAllErrosOnSubmit)return false;s.push(i.attr("name"));if(t.showOneMessage==true&&a){return false}}});e.trigger("jqv.form.result",[a]);if(a){if(t.scroll){var i=r.offset().top;var s=r.offset().left;var o=t.promptPosition;if(typeof o=="string"&&o.indexOf(":")!=-1)o=o.substring(0,o.indexOf(":"));if(o!="bottomRight"&&o!="bottomLeft"){var n=methods._getPrompt(r);if(n){i=n.offset().top}}if(t.scrollOffset){i-=t.scrollOffset}if(t.isOverflown){var l=$(t.overflownDIV);if(!l.length)return false;var d=l.scrollTop();var f=-parseInt(l.offset().top);i+=d+f-5;var u=$(t.overflownDIV+":not(:animated)");u.animate({scrollTop:i},1100,function(){if(t.focusFirstField)r.focus()})}else{$("html, body").animate({scrollTop:i},1100,function(){if(t.focusFirstField)r.focus()});$("html, body").animate({scrollLeft:s},1100)}}else if(t.focusFirstField)r.focus();return false}return true},_validateFormWithAjax:function(e,t){var a=e.serialize();var r=t.ajaxFormValidationMethod?t.ajaxFormValidationMethod:"GET";var i=t.ajaxFormValidationURL?t.ajaxFormValidationURL:e.attr("action");var s=t.dataType?t.dataType:"json";$.ajax({type:r,url:i,cache:false,dataType:s,data:a,form:e,methods:methods,options:t,beforeSend:function(){return t.onBeforeAjaxFormValidation(e,t)},error:function(e,a){if(t.onFailure){t.onFailure(e,a)}else{methods._ajaxError(e,a)}},success:function(a){if(s=="json"&&a!==true){var r=false;for(var i=0;i<a.length;i++){var o=a[i];var n=o[0];var l=$($("#"+n)[0]);if(l.length==1){var d=o[2];if(o[1]==true){if(d==""||!d){methods._closePrompt(l)}else{if(t.allrules[d]){var f=t.allrules[d].alertTextOk;if(f)d=f}if(t.showPrompts)methods._showPrompt(l,d,"pass",false,t,true)}}else{r|=true;if(t.allrules[d]){var f=t.allrules[d].alertText;if(f)d=f}if(t.showPrompts)methods._showPrompt(l,d,"",false,t,true)}}}t.onAjaxFormComplete(!r,e,a,t)}else t.onAjaxFormComplete(true,e,a,t)}})},_validateField:function(e,t,a){if(!e.attr("id")){e.attr("id","form-validation-field-"+$.validationEngine.fieldIdCounter);++$.validationEngine.fieldIdCounter}if(!t.validateNonVisibleFields&&(e.is(":hidden")&&!t.prettySelect||e.parent().is(":hidden")))return false;var r=e.attr(t.validateAttribute);var i=/validate\[(.*)\]/.exec(r);if(!i)return false;var s=i[1];var o=s.split(/\[|,|\]/);var n=false;var l=e.attr("name");var d="";var f="";var u=false;var m=false;t.isError=false;t.showArrow=true;if(t.maxErrorsPerField>0){m=true}var v=$(e.closest("form, .validationEngineContainer"));for(var c=0;c<o.length;c++){o[c]=o[c].replace(" ","");if(o[c]===""){delete o[c]}}for(var c=0,p=0;c<o.length;c++){if(m&&p>=t.maxErrorsPerField){if(!u){var h=$.inArray("required",o);u=h!=-1&&h>=c}break}var g=undefined;switch(o[c]){case"required":u=true;g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._required);break;case"custom":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._custom);break;case"groupRequired":var x="["+t.validateAttribute+"*="+o[c+1]+"]";var _=v.find(x).eq(0);if(_[0]!=e[0]){methods._validateField(_,t,a);t.showArrow=true}g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._groupRequired);if(g)u=true;t.showArrow=false;break;case"ajax":g=methods._ajax(e,o,c,t);if(g){f="load"}break;case"minSize":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._minSize);break;case"maxSize":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._maxSize);break;case"min":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._min);break;case"max":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._max);break;case"past":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._past);break;case"future":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._future);break;case"dateRange":var x="["+t.validateAttribute+"*="+o[c+1]+"]";t.firstOfGroup=v.find(x).eq(0);t.secondOfGroup=v.find(x).eq(1);if(t.firstOfGroup[0].value||t.secondOfGroup[0].value){g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._dateRange)}if(g)u=true;t.showArrow=false;break;case"dateTimeRange":var x="["+t.validateAttribute+"*="+o[c+1]+"]";t.firstOfGroup=v.find(x).eq(0);t.secondOfGroup=v.find(x).eq(1);if(t.firstOfGroup[0].value||t.secondOfGroup[0].value){g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._dateTimeRange)}if(g)u=true;t.showArrow=false;break;case"maxCheckbox":e=$(v.find("input[name='"+l+"']"));g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._maxCheckbox);break;case"minCheckbox":e=$(v.find("input[name='"+l+"']"));g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._minCheckbox);break;case"equals":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._equals);break;case"funcCall":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._funcCall);break;case"creditCard":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._creditCard);break;case"condRequired":g=methods._getErrorMessage(v,e,o[c],o,c,t,methods._condRequired);if(g!==undefined){u=true}break;default:}var C=false;if(typeof g=="object"){switch(g.status){case"_break":C=true;break;case"_error":g=g.message;break;case"_error_no_prompt":return true;break;default:break}}if(C){break}if(typeof g=="string"){d+=g+"<br/>";t.isError=true;p++}}if(!u&&!$.trim(e.val())&&$.trim(e.val()).length<1&&o.indexOf("equals")<0)t.isError=false;var b=e.prop("type");var F=e.data("promptPosition")||t.promptPosition;if((b=="radio"||b=="checkbox")&&v.find("input[name='"+l+"']").size()>1){if(F==="inline"){e=$(v.find("input[name='"+l+"'][type!=hidden]:last"))}else{e=$(v.find("input[name='"+l+"'][type!=hidden]:first"))}t.showArrow=false}if(e.is(":hidden")&&t.prettySelect){e=v.find("#"+t.usePrefix+methods._jqSelector(e.attr("id"))+t.useSuffix)}if(t.isError&&t.showPrompts){methods._showPrompt(e,d,f,false,t)}else{if(!n)methods._closePrompt(e)}if(!n){e.trigger("jqv.field.result",[e,t.isError,d])}var T=$.inArray(e[0],t.InvalidFields);if(T==-1){if(t.isError)t.InvalidFields.push(e[0])}else if(!t.isError){t.InvalidFields.splice(T,1)}methods._handleStatusCssClasses(e,t);if(t.isError&&t.onFieldFailure)t.onFieldFailure(e);if(!t.isError&&t.onFieldSuccess)t.onFieldSuccess(e);return t.isError},_handleStatusCssClasses:function(e,t){if(t.addSuccessCssClassToField)e.removeClass(t.addSuccessCssClassToField);if(t.addFailureCssClassToField)e.removeClass(t.addFailureCssClassToField);if(t.addSuccessCssClassToField&&!t.isError)e.addClass(t.addSuccessCssClassToField);if(t.addFailureCssClassToField&&t.isError)e.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(e,t,a,r,i,s,o){var n=jQuery.inArray(a,r);if(a==="custom"||a==="funcCall"){var l=r[n+1];a=a+"["+l+"]";delete r[n]}var d=a;var f=t.attr("data-validation-engine")?t.attr("data-validation-engine"):t.attr("class");var u=f.split(" ");var m;if(a=="future"||a=="past"||a=="maxCheckbox"||a=="minCheckbox"){m=o(e,t,r,i,s)}else{m=o(t,r,i,s)}if(m!=undefined){var v=methods._getCustomErrorMessage($(t),u,d,s);if(v)m=v}return m},_getCustomErrorMessage:function(e,t,a,r){var i=false;var s=/^custom\[.*\]$/.test(a)?methods._validityProp["custom"]:methods._validityProp[a];if(s!=undefined){i=e.attr("data-errormessage-"+s);if(i!=undefined)return i}i=e.attr("data-errormessage");if(i!=undefined)return i;var o="#"+e.attr("id");if(typeof r.custom_error_messages[o]!="undefined"&&typeof r.custom_error_messages[o][a]!="undefined"){i=r.custom_error_messages[o][a]["message"]}else if(t.length>0){for(var n=0;n<t.length&&t.length>0;n++){var l="."+t[n];if(typeof r.custom_error_messages[l]!="undefined"&&typeof r.custom_error_messages[l][a]!="undefined"){i=r.custom_error_messages[l][a]["message"];break}}}if(!i&&typeof r.custom_error_messages[a]!="undefined"&&typeof r.custom_error_messages[a]["message"]!="undefined"){i=r.custom_error_messages[a]["message"]}return i},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(e,t,a,r,i){switch(e.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var s=$.trim(e.val());var o=$.trim(e.attr("data-validation-placeholder"));var n=$.trim(e.attr("placeholder"));if(!s||o&&s==o||n&&s==n){return r.allrules[t[a]].alertText}break;case"radio":case"checkbox":if(i){if(!e.attr("checked")){return r.allrules[t[a]].alertTextCheckboxMultiple}break}var l=e.closest("form, .validationEngineContainer");var d=e.attr("name");if(l.find("input[name='"+d+"']:checked").size()==0){if(l.find("input[name='"+d+"']:visible").size()==1)return r.allrules[t[a]].alertTextCheckboxe;else return r.allrules[t[a]].alertTextCheckboxMultiple}break}},_groupRequired:function(e,t,a,r){var i="["+r.validateAttribute+"*="+t[a+1]+"]";var s=false;e.closest("form, .validationEngineContainer").find(i).each(function(){if(!methods._required($(this),t,a,r)){s=true;return false}});if(!s){return r.allrules[t[a]].alertText}},_custom:function(e,t,a,r){var i=t[a+1];var s=r.allrules[i];var o;if(!s){alert("jqv:custom rule not found - "+i);return}if(s["regex"]){var n=s.regex;if(!n){alert("jqv:custom regex not found - "+i);return}var l=new RegExp(n);if(!l.test($.trim(e.val())))return r.allrules[i].alertText}else if(s["func"]){o=s["func"];if(typeof o!=="function"){alert("jqv:custom parameter 'function' is no function - "+i);return}if(!o(e,t,a,r))return r.allrules[i].alertText}else{alert("jqv:custom type not allowed "+i);return}},_funcCall:function(e,t,a,r){var i=t[a+1];var s;if(i.indexOf(".")>-1){var o=i.split(".");var n=window;while(o.length){n=n[o.shift()]}s=n}else s=window[i]||r.customFunctions[i];if(typeof s=="function")return s(e,t,a,r)},_equals:function(e,t,a,r){var i=t[a+1];if($.trim(e.val())!=$("#"+i).val())return r.allrules.equals.alertText},_maxSize:function(e,t,a,r){var i=t[a+1];var s=$.trim(e.val()).length;if(s>i){var o=r.allrules.maxSize;return o.alertText+i+o.alertText2}},_minSize:function(e,t,a,r){var i=t[a+1];var s=$.trim(e.val()).length;if(s<i){var o=r.allrules.minSize;return o.alertText+i+o.alertText2}},_min:function(e,t,a,r){var i=parseFloat(t[a+1]);var s=parseFloat($.trim(e.val()));if(s<i){var o=r.allrules.min;if(o.alertText2)return o.alertText+i+o.alertText2;return o.alertText+i}},_max:function(e,t,a,r){var i=parseFloat(t[a+1]);var s=parseFloat($.trim(e.val()));if(s>i){var o=r.allrules.max;if(o.alertText2)return o.alertText+i+o.alertText2;return o.alertText+i}},_past:function(e,t,a,r,i){var s=a[r+1];var o=$(e.find("*[name='"+s.replace(/^#+/,"")+"']"));var n;if(s.toLowerCase()=="now"){n=new Date}else if(undefined!=o.val()){if(o.is(":disabled"))return;n=methods._parseDate(o.val())}else{n=methods._parseDate(s)}var l=methods._parseDate($.trim(t.val()));if(l>n){var d=i.allrules.past;if(d.alertText2)return d.alertText+methods._dateToString(n)+d.alertText2;return d.alertText+methods._dateToString(n)}},_future:function(e,t,a,r,i){var s=a[r+1];var o=$(e.find("*[name='"+s.replace(/^#+/,"")+"']"));var n;if(s.toLowerCase()=="now"){n=new Date}else if(undefined!=o.val()){if(o.is(":disabled"))return;n=methods._parseDate(o.val())}else{n=methods._parseDate(s)}var l=methods._parseDate($.trim(t.val()));if(l<n){var d=i.allrules.future;if(d.alertText2)return d.alertText+methods._dateToString(n)+d.alertText2;return d.alertText+methods._dateToString(n)}},_isDate:function(e){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return t.test(e)},_isDateTime:function(e){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return t.test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,t,a,r){if(!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value){return r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2}if(!methods._isDate(r.firstOfGroup[0].value)||!methods._isDate(r.secondOfGroup[0].value)){return r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2}if(!methods._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)){return r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2}},_dateTimeRange:function(e,t,a,r){if(!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value){return r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2}if(!methods._isDateTime(r.firstOfGroup[0].value)||!methods._isDateTime(r.secondOfGroup[0].value)){return r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2}if(!methods._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)){return r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2}},_maxCheckbox:function(e,t,a,r,i){var s=a[r+1];var o=t.attr("name");var n=e.find("input[name='"+o+"']:checked").size();if(n>s){i.showArrow=false;if(i.allrules.maxCheckbox.alertText2)return i.allrules.maxCheckbox.alertText+" "+s+" "+i.allrules.maxCheckbox.alertText2;return i.allrules.maxCheckbox.alertText}},_minCheckbox:function(e,t,a,r,i){var s=a[r+1];var o=t.attr("name");var n=e.find("input[name='"+o+"']:checked").size();if(n<s){i.showArrow=false;return i.allrules.minCheckbox.alertText+" "+s+" "+i.allrules.minCheckbox.alertText2}},_creditCard:function(e,t,a,r){var i=false,s=$.trim(e.val()).replace(/ +/g,"").replace(/-+/g,"");var o=s.length;if(o>=14&&o<=16&&parseInt(s)>0){var n=0,a=o-1,l=1,d,f=new String;do{d=parseInt(s.charAt(a));f+=l++%2==0?d*2:d}while(--a>=0);for(a=0;a<f.length;a++){n+=parseInt(f.charAt(a))}i=n%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(field,rules,i,options){var errorSelector=rules[i+1];var rule=options.allrules[errorSelector];var extraData=rule.extraData;var extraDataDynamic=rule.extraDataDynamic;var data={fieldId:field.attr("id"),fieldValue:$.trim(field.val())};if(typeof extraData==="object"){$.extend(data,extraData)}else if(typeof extraData==="string"){var tempData=extraData.split("&");for(var i=0;i<tempData.length;i++){var values=tempData[i].split("=");if(values[0]&&values[0]){data[values[0]]=values[1]}}}if(extraDataDynamic){var tmpData=[];var domIds=String(extraDataDynamic).split(",");for(var i=0;i<domIds.length;i++){var id=domIds[i];if($(id).length){var inputValue=field.closest("form, .validationEngineContainer").find(id).val();var keyValue=id.replace("#","")+"="+escape(inputValue);data[id.replace("#","")]=inputValue}}}if(options.eventTrigger=="field"){delete options.ajaxValidCache[field.attr("id")]}if(!options.isError&&!methods._checkAjaxFieldStatus(field.attr("id"),options)){$.ajax({type:options.ajaxFormValidationMethod,url:rule.url,cache:false,dataType:"json",data:data,field:field,rule:rule,methods:methods,options:options,beforeSend:function(){},error:function(e,t){if(options.onFailure){options.onFailure(e,t)}else{methods._ajaxError(e,t)}},success:function(json){json=eval("("+json+")");var errorFieldId=json[0];var errorField=$("#"+errorFieldId).eq(0);if(errorField.length==1){var status=json[1];var msg=json[2];if(!status){options.ajaxValidCache[errorFieldId]=false;options.isError=true;if(msg){if(options.allrules[msg]){var txt=options.allrules[msg].alertText;if(txt){msg=txt}}}else msg=rule.alertText;if(options.showPrompts)methods._showPrompt(errorField,msg,"",true,options)}else{options.ajaxValidCache[errorFieldId]=true;if(msg){if(options.allrules[msg]){var txt=options.allrules[msg].alertTextOk;if(txt){msg=txt}}}else msg=rule.alertTextOk;if(options.showPrompts){if(msg)methods._showPrompt(errorField,msg,"pass",true,options);else methods._closePrompt(errorField)}if(options.eventTrigger=="submit")field.closest("form").submit()}}errorField.trigger("jqv.field.result",[errorField,options.isError,msg])}});return rule.alertTextLoad}},_ajaxError:function(e,t){if(e.status==0&&t==null)alert("The page is not served from a server! ajax call failed");else if(typeof console!="undefined")console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split("-");if(t==e)t=e.split("/");if(t==e){t=e.split(".");return new Date(t[2],t[1]-1,t[0])}return new Date(t[0],t[1]-1,t[2])},_showPrompt:function(e,t,a,r,i,s){if(e.data("jqv-prompt-at")instanceof jQuery){e=e.data("jqv-prompt-at")}else if(e.data("jqv-prompt-at")){e=$(e.data("jqv-prompt-at"))}var o=methods._getPrompt(e);if(s)o=false;if($.trim(t)){if(o)methods._updatePrompt(e,o,t,a,r,i);else methods._buildPrompt(e,t,a,r,i)}},_buildPrompt:function(e,t,a,r,i){var s=$("<div>");s.addClass(methods._getClassName(e.attr("id"))+"formError");s.addClass("parentForm"+methods._getClassName(e.closest("form, .validationEngineContainer").attr("id")));s.addClass("formError");switch(a){case"pass":s.addClass("greenPopup");break;case"load":s.addClass("blackPopup");break;default:}if(r)s.addClass("ajaxed");var o=$("<div>").addClass("formErrorContent").html(t).appendTo(s);var n=e.data("promptPosition")||i.promptPosition;if(i.showArrow){var l=$("<div>").addClass("formErrorArrow");if(typeof n=="string"){var d=n.indexOf(":");if(d!=-1)n=n.substring(0,d)}switch(n){case"bottomLeft":case"bottomRight":s.find(".formErrorContent").before(l);l.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":l.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');s.append(l);break}}if(i.addPromptClass)s.addClass(i.addPromptClass);var f=e.attr("data-required-class");if(f!==undefined){s.addClass(f)}else{if(i.prettySelect){if($("#"+e.attr("id")).next().is("select")){var u=$("#"+e.attr("id").substr(i.usePrefix.length).substring(i.useSuffix.length)).attr("data-required-class");if(u!==undefined){s.addClass(u)}}}}s.css({opacity:0});if(n==="inline"){s.addClass("inline");if(typeof e.attr("data-prompt-target")!=="undefined"&&$("#"+e.attr("data-prompt-target")).length>0){s.appendTo($("#"+e.attr("data-prompt-target")))}else{e.after(s)}}else{e.before(s)}var d=methods._calculatePosition(e,s,i);s.css({position:n==="inline"?"relative":"absolute",top:d.callerTopPosition,left:d.callerleftPosition,marginTop:d.marginTopSize,opacity:0}).data("callerField",e);if(i.autoHidePrompt){setTimeout(function(){s.animate({opacity:0},function(){s.closest(".formErrorOuter").remove();s.remove()})},i.autoHideDelay)}return s.animate({opacity:.87})},_updatePrompt:function(e,t,a,r,i,s,o){if(t){if(typeof r!=="undefined"){if(r=="pass")t.addClass("greenPopup");else t.removeClass("greenPopup");if(r=="load")t.addClass("blackPopup");else t.removeClass("blackPopup")}if(i)t.addClass("ajaxed");else t.removeClass("ajaxed");t.find(".formErrorContent").html(a);var n=methods._calculatePosition(e,t,s);var l={top:n.callerTopPosition,left:n.callerleftPosition,marginTop:n.marginTopSize};if(o)t.css(l);else t.animate(l)}},_closePrompt:function(e){var t=methods._getPrompt(e);if(t)t.fadeTo("fast",0,function(){t.parent(".formErrorOuter").remove();t.remove()})},closePrompt:function(e){return methods._closePrompt(e)},_getPrompt:function(e){var t=$(e).closest("form, .validationEngineContainer").attr("id");var a=methods._getClassName(e.attr("id"))+"formError";var r=$("."+methods._escapeExpression(a)+".parentForm"+methods._getClassName(t))[0];if(r)return $(r)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var t=$(document);var a=$("body");var r=e&&e.hasClass("rtl")||e&&(e.attr("dir")||"").toLowerCase()==="rtl"||t.hasClass("rtl")||(t.attr("dir")||"").toLowerCase()==="rtl"||a.hasClass("rtl")||(a.attr("dir")||"").toLowerCase()==="rtl";return Boolean(r)},_calculatePosition:function(e,t,a){var r,i,s;var o=e.width();var n=e.position().left;var l=e.position().top;var d=e.height();var f=t.height();r=i=0;s=-f;var u=e.data("promptPosition")||a.promptPosition;var m="";var v="";var c=0;var p=0;if(typeof u=="string"){if(u.indexOf(":")!=-1){m=u.substring(u.indexOf(":")+1);u=u.substring(0,u.indexOf(":"));if(m.indexOf(",")!=-1){v=m.substring(m.indexOf(",")+1);m=m.substring(0,m.indexOf(","));p=parseInt(v);if(isNaN(p))p=0}c=parseInt(m);if(isNaN(m))m=0}}switch(u){default:case"topRight":i+=n+o-30;r+=l;break;case"topLeft":r+=l;i+=n;break;case"centerRight":r=l;s=0;i=n+e.outerWidth(true)+5;break;case"centerLeft":i=n-t.outerWidth();r=l;s=0;break;case"bottomLeft":r=l+e.outerHeight();s=0;i=n;break;case"bottomRight":i=n+o-30;r=l+e.outerHeight();s=0;break;case"inline":i=0;r=0;s=0}i+=c;r+=p;return{callerTopPosition:r+"px",callerleftPosition:i+"px",marginTopSize:s+"px"}},_saveOptions:function(e,t){if($.validationEngineLanguage)var a=$.validationEngineLanguage.allRules;else $.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");$.validationEngine.defaults.allrules=a;var r=$.extend(true,{},$.validationEngine.defaults,t);e.data("jqv",r);return r},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,t,a,r){var i,s;for(i=a+1;i<t.length;i++){s=jQuery("#"+t[i]).first();if(s.length&&methods._required(s,["required"],0,r,true)==undefined){return methods._required(e,["required"],0,r)}}},_submitButtonClick:function(e){var t=$(this);var a=t.closest("form, .validationEngineContainer");a.data("jqv_submitButton",t.attr("id"))}};$.fn.validationEngine=function(e){var t=$(this);if(!t[0])return t;if(typeof e=="string"&&e.charAt(0)!="_"&&methods[e]){if(e!="showPrompt"&&e!="hide"&&e!="hideAll")methods.init.apply(t);return methods[e].apply(t,Array.prototype.slice.call(arguments,1))}else if(typeof e=="object"||!e){methods.init.apply(t,arguments);return methods.attach.apply(t)}else{$.error("Method "+e+" does not exist in jQuery.validationEngine")}};$.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:true,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:"get",onAjaxFormComplete:$.noop,onBeforeAjaxFormValidation:$.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:false,autoHideDelay:1e4,fadeDuration:.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:false}};$(function(){$.validationEngine.defaults.promptPosition=methods.isRTL()?"topLeft":"topRight"})})(jQuery);